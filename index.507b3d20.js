function r(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t=document.body.querySelector("button"),n=document.body.querySelector("table"),o=n.querySelectorAll("tr").length,i=document.body.querySelector(".game-score");function a(){var r=n.querySelectorAll("td");t.classList.remove("start"),t.classList.add("restart"),r.forEach(function(r){r.innerText="",r.classList="field-cell"});var e=document.body.querySelectorAll(".message");t.innerText="Restart",e.forEach(function(r){r.classList.contains("hidden")||r.classList.add("hidden")}),i.innerText=0,f(),f(),c()}function f(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=s().flat(),t=e.filter(function(r){return r}).length<2,i=!r.every(function(r,t){return r===e[t]}),a=Array.from(n.querySelectorAll("td")).filter(function(r){return!r.innerText}),f=Math.floor(Math.random()*(a.length-1)),c=a[f];if(!a.length&&!function(){for(var r=s(),e=0;e<o;e++)for(var t=0;t<o;t++){var n=r[e][t],i=r[e]&&r[e][t+1],a=r[e+1]&&r[e+1][t];if(n===i||n===a)return!0}return!1}()){document.querySelector(".message-lose").classList.remove("hidden");return}(i||t)&&c&&(c.innerText=.9>Math.random()?2:4)}function c(){n.querySelectorAll("td").forEach(function(r){r.classList="field-cell",r.innerText&&r.classList.add("field-cell--".concat(r.innerText))})}function u(r){for(var e=l(r),t=0;t<e.length;t++)e[t]===e[t+1]&&(e[t]*=2,e[t+1]=0,i.innerText=Number(i.innerText)+e[t]);for(e=l(e);e.length<o;)e.push(0);return e}function l(r){return r.filter(function(r){return r})}function s(){var r=Array.from(n.querySelector("tbody").children),t=[];return r.map(function(r){var n=[];t.push(n),e(r.children).forEach(function(r){n.push(+r.innerText)})}),t}function d(r){for(var e=Array.from(n.querySelectorAll("td")),t=0;t<e.length;t++)e[t].innerText=0===r[t]?"":r[t]}t.addEventListener("click",function(){a()}),document.addEventListener("keydown",function(r){r.preventDefault()}),document.addEventListener("keyup",function(r){r.preventDefault();var i="Start"===t.innerText;if(!function(){var r=n.querySelectorAll("td"),e=document.body.querySelector(".message-win");if(r.forEach(function(r){"2048"===r.innerText&&e.classList.remove("hidden")}),!e.classList.contains("hidden"))return!0}()){if("ArrowLeft"===r.code){if(i){a();return}(function(){for(var r=s(),t=e(r).flat(),n=0;n<o;n++){var i=r[n];i=u(i),r[n]=i}d(r.flat()),f(t),c()})()}if("ArrowRight"===r.code){if(i){a();return}(function(){for(var r=s(),t=e(r).flat(),n=0;n<o;n++){var i=r[n];i.reverse(),(i=u(i)).reverse(),r[n]=i}d(r.flat()),f(t),c()})()}if("ArrowUp"===r.code){if(i){a();return}(function(){for(var r=s(),t=e(r).flat(),n=0;n<o;n++){for(var i=[],a=0;a<o;a++)i.push(r[a][n]);i=u(i);for(var l=0;l<o;l++)r[l][n]=i[l]}d(r.flat()),f(t),c()})()}if("ArrowDown"===r.code){if(i){a();return}(function(){for(var r=s(),t=e(r).flat(),n=0;n<o;n++){for(var i=[],a=0;a<o;a++)i.push(r[a][n]);i.reverse(),(i=u(i)).reverse();for(var l=0;l<o;l++)r[l][n]=i[l]}d(r.flat()),f(t),c()})()}}});
//# sourceMappingURL=index.507b3d20.js.map
